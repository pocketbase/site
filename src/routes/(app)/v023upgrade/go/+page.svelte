<script>
    import CodeBlock from "@/components/CodeBlock.svelte";
    import UpgradeTabs from "@/components/UpgradeTabs.svelte";
    import HeadingLink from "@/components/HeadingLink.svelte";
    import Toc from "@/components/Toc.svelte";
</script>

<p class="txt-hint txt-sm">
    For the JSVM version please refer to <a href="/v023upgrade/jsvm/">/v023upgrade/jsvm</a>.
</p>

<Toc headingSelector="h1,h2,h3" />

<HeadingLink title="Upgrade overview" />

<div class="alert alert-warning m-b-xs">
    <div class="content">
        <p>
            Please note that you don't have to upgrade to v0.23.0 if you are not planning further developing
            your existing app or are satisfied with the v0.22.x features set. There are no critical issues
            with PocketBase v0.22.x and in the case of reported bugs and security vulnerabilities, the fixes
            will be backported for at least until Q1 of 2025 (<em>if not longer</em>).
        </p>
        <p>
            If you don't plan upgrading just make sure to pin the SDKs version to their latest PocketBase
            v0.22.x compatible:
        </p>
        <ul>
            <li>JS SDK: <code>{`<0.22.0`}</code></li>
            <li>Dart SDK: <code>{`<0.19.0`}</code></li>
        </ul>
    </div>
</div>

<p class="inline-flex">
    <i class="ri-alert-fill txt-warning"></i>
    <strong>
        Before upgrading make sure to backup your current <code>pb_data</code> directory somewhere safe.
    </strong>
</p>

<p>
    PocketBase v0.23+ comes with many changes and requires applying manual migration steps to your custom Go
    code.
    <br />
    Existing data in <code>pb_data/data.db</code> will be automatically upgraded once the PocketBase v0.23.0
    executable is started.
    <br />
    But there is no easy and automated Go code upgrade solution so be prepared because it might take you some time
    - from 1h to entire weekend!
</p>

<p>Suggested upgrade path:</p>
<ol start="0">
    <li>
        Download a backup of your production <code>pb_data</code> so that you can adjust your code and test the
        upgrade locally.
    </li>
    <li>
        Ensure that you are already using PocketBase v0.22.x (you can find the version number in the
        bottom-right corner in the UI). If you are using an older version, please upgrade first to
        <a
            href="https://github.com/pocketbase/pocketbase/releases/tag/v0.22.21"
            target="_blank"
            rel="noopener noreferrer"
        >
            PocketBase v0.22.x
        </a>
        (there are no major breaking changes in the recent v0.22.x releases so it should be enough to download
        the specific executable and run it against your <code>pb_data</code>).
    </li>
    <li>
        If you are using the SDKs, apply the necessary changes to your client-side code by following:
        <ul>
            <li>
                <a
                    href="{import.meta.env.PB_JS_SDK_URL}/blob/master/CHANGELOG.md"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    JS SDK v0.22+ CHANGELOG
                </a>
            </li>
            <li>
                <a
                    href="{import.meta.env.PB_DART_SDK_URL}/blob/master/CHANGELOG.md"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    DART SDK v0.19+ CHANGELOG
                </a>
            </li>
        </ul>
    </li>
    <li>Temporary comment the <code>migrations</code> import statement (<em>if you use migrations</em>).</li>
    <li>Apply the necessary Go code changes based on the notes listed below in this document.</li>
    <li>
        Upgrade the migration files (if any) to the new APIs. If your existing <code>migrations</code> files
        are all autogenerated, you may find it easier to upgrade by deleting all of them and run with the
        v0.23.0 version of your app
        <code>go run main.go migrate collections</code>
        which will create a full snapshot of your latest collections configuration.
        <br />
        <em>
            Optionally, after that you can also run <code>go run migrate history-sync</code> to remove the deleted
            migrations from the applied migrations history.
        </em>
    </li>
    <li>Uncomment the <code>migrations</code> import statement.</li>
    <li>
        Build your Go executable and test run your local changes (<strong
            >including a test against no existing pb_data</strong
        >).
    </li>
    <li>
        If everything is working fine, create another more recent production backup for just in case.
        <br />
        After that deploy your app executable to the production server and restart the app service (e.g.
        <code>systemctl restart pocketbase</code>).
    </li>
</ol>

<div class="alert">
    <div class="content">
        <p>The below listed changes doesn't cover everything but it should be a good starting point.</p>
        <p>
            If you need help with the "translation" of your old code to the new APIs, feel free to open a
            <a href={import.meta.env.PB_DISCUSSIONS_URL} target="_blank" rel="noopener noreferrer">
                Q&A discussion
            </a>
            with the specific code sample and I'll try to assist you.
        </p>
    </div>
</div>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="Initialisms case normalization" />
<p>
    For consistency with the Go standard library and to silent commonly used linters the following initilisms
    case normalization was applied for all exported bindings:
</p>
<table class="table-compact table-border" style="min-width: auto;">
    <thead>
        <tr>
            <th>Old</th>
            <th>New</th>
        </tr>
    </thead>
    <tbody>
        <tr valign="top">
            <td><span class="txt-hint">%</span>Json<span class="txt-hint">%</span></td>
            <td><span class="txt-hint">%</span><strong>JSON</strong><span class="txt-hint">%</span></td>
        </tr>
        <tr valign="top">
            <td><span class="txt-hint">%</span>Ip<span class="txt-hint">%</span></td>
            <td><span class="txt-hint">%</span><strong>IP</strong><span class="txt-hint">%</span></td>
        </tr>
        <tr valign="top">
            <td><span class="txt-hint">%</span>Url<span class="txt-hint">%</span></td>
            <td><span class="txt-hint">%</span><strong>URL</strong><span class="txt-hint">%</span></td>
        </tr>
        <tr valign="top">
            <td><span class="txt-hint">%</span>Smtp<span class="txt-hint">%</span></td>
            <td><span class="txt-hint">%</span><strong>SMTP</strong><span class="txt-hint">%</span></td>
        </tr>
        <tr valign="top">
            <td><span class="txt-hint">%</span>Tls<span class="txt-hint">%</span></td>
            <td><span class="txt-hint">%</span><strong>TLS</strong><span class="txt-hint">%</span></td>
        </tr>
        <tr valign="top">
            <td><span class="txt-hint">%</span>Jwt<span class="txt-hint">%</span></td>
            <td><span class="txt-hint">%</span><strong>JWT</strong><span class="txt-hint">%</span></td>
        </tr>
    </tbody>
</table>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="App changes" />
<div class="alert">
    <div class="content">
        <p>
            The <code>Dao</code> abstraction has been removed and most of the old <code>Dao</code>
            methods are now part of the <code>core.App</code> instance.
        </p>
        <p>
            The app settings related to the OAuth2 and email templates are moved in the collection options to
            allow more granular customizations.
        </p>
        <p>
            For more details about all new app fields and methods, please refer to the
            <a
                href="{import.meta.env.PB_GODOC_URL}@master/core#App"
                target="_blank"
                rel="noopener noreferrer"
            >
                <code>core.App</code> interface docs.
            </a>
        </p>
    </div>
</div>

<UpgradeTabs language="go" before={`App.Cache()`} after={`App.Store()`} />

<UpgradeTabs language="go" before={`App.RefreshSettings()`} after={`App.ReloadSettings()`} />

<HeadingLink
    tag="h6"
    title={`Admin DB methods (admins are now system "_superusers" auth collection records)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().AdminQuery()`}
    after={`App.RecordQuery(core.CollectionNameSuperusers)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindAdminById(id)`}
    after={`App.FindRecordById(core.CollectionNameSuperusers, id)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindAdminByEmail(email)`}
    after={`App.FindAuthRecordByEmail(core.CollectionNameSuperusers, email)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindAdminByToken(token, baseTokenKey)`}
    after={`
        // tokenType could be:
        // - "auth" (core.TokenTypeAuth)
        // - "file" (core.TokenTypeFile)
        // - "verification" (core.TokenTypeVerification)
        // - "passwordReset" (core.TokenTypePasswordReset)
        // - "emailChange" (core.TokenTypeEmailChange)
        App.FindAuthRecordByToken(token, [tokenType])
    `}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().TotalAdmins()`}
    after={`App.CountRecords(core.CollectionNameSuperusers, [exprs...])`}
/>

<UpgradeTabs language="go" before={`App.Dao().DeleteAdmin(admin)`} after={`App.Delete(admin)`} />

<UpgradeTabs language="go" before={`App.Dao().SaveAdmin(admin)`} after={`App.Save(admin)`} />

<HeadingLink tag="h6" title={`Record DB methods`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().RecordQuery(collectionModelOrIdentifier)`}
    after={`App.RecordQuery(collectionModelOrIdentifier)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindRecordById(collectionNameOrId, recordId, [optFilters...])`}
    after={`App.FindRecordById(collectionModelOrIdentifier, recordId, [optFilters...])`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindRecordsByIds(collectionNameOrId, recordIds, [optFilters...])`}
    after={`App.FindRecordsByIds(collectionModelOrIdentifier, recordIds, [optFilters...])`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindRecordsByExpr(collectionNameOrId, [exprs...])`}
    after={`App.FindAllRecords(collectionModelOrIdentifier, [exprs...])`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindFirstRecordByData(collectionNameOrId, key, value)`}
    after={`App.FindFirstRecordByData(collectionModelOrIdentifier, key, value)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindRecordsByFilter(collectionNameOrId, filter, sort, limit, offset, [params])`}
    after={`App.FindRecordsByFilter(collectionModelOrIdentifier, filter, sort, limit, offset, [params])`}
/>

<UpgradeTabs
    language="go"
    before={`N/A`}
    after={`App.CountRecords(collectionModelOrIdentifier, [exprs...])`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindAuthRecordByToken(token, baseTokenKey)`}
    after={`
        // tokenType could be:
        // - auth
        // - file
        // - verification
        // - passwordReset
        // - emailChange
        App.FindAuthRecordByToken(token, [tokenType])
    `}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindAuthRecordByEmail(collectionNameOrId, email)`}
    after={`App.FindAuthRecordByEmail(collectionModelOrIdentifier, email)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindAuthRecordByUsername(collectionNameOrId, username)`}
    after={`
        // The "username" field is no longer required and has no special meaning.
        App.FindFirstRecordByData(collectionModelOrIdentifier, "username", username)
    `}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().SuggestUniqueAuthRecordUsername(ollectionNameOrId, baseUsername, [excludeIds...])`}
    after={`
        // The "username" field is no longer required and has no special meaning. As a workaound you can use something like:
        func suggestUniqueAuthRecordUsername(
          collectionModelOrIdentifier,
          baseUsername,
        ) string {
          username := baseUsername
          for i = 0; i < 10; i++ { // max 10 attempts
            total, err := App.CountRecords(
              collectionModelOrIdentifier,
              dbx.NewExp("LOWER([[username]])={:username}", dbx.Params{"username": username.toLowerCase()}),
            )
            if err == nil && total == 0 {
              break // already unique
            }

            username = baseUsername + security.RandomStringWithAlphabet(3+i, "123456789")
          }

          return username
        }
    `}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().CanAccessRecord(record, requestInfo, accessRule)`}
    after={`App.CanAccessRecord(record, requestInfo, accessRule)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().ExpandRecord(record, expands, optFetchFunc)`}
    after={`App.ExpandRecord(record, expands, optFetchFunc)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().ExpandRecords(records, expands, optFetchFunc)`}
    after={`App.ExpandRecords(records, expands, optFetchFunc)`}
/>

<UpgradeTabs language="go" before={`App.Dao().SaveRecord(record)`} after={`App.Save(record)`} />

<UpgradeTabs language="go" before={`App.Dao().DeleteRecord(record)`} after={`App.Delete(record)`} />

<HeadingLink tag="h6" title={`ExternalAuth DB methods (converted to "_externalAuths" collection records)`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().FindAllExternalAuthsByRecord(authRecord)`}
    after={`App.FindAllExternalAuthsByRecord(authRecord)`}
/>

<UpgradeTabs language="go" before={`N/A`} after={`App.FindAllExternalAuthsByCollection(collection)`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().FindFirstExternalAuthByExpr(expr)`}
    after={`App.FindFirstExternalAuthByExpr(expr)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindExternalAuthByRecordAndProvider(authRecord)`}
    after={`
        App.FindFirstExternalAuthByExpr(dbx.HashExp{
            "collectionRef": authRecord.Collection().Id,
            "recordRef":     authRecord.Id,
            "provider":      provider,
        })
    `}
/>

<UpgradeTabs language="go" before={`App.Dao().DeleteExternalAuth(model)`} after={`App.Delete(model)`} />

<UpgradeTabs language="go" before={`App.Dao().SaveExternalAuth(model)`} after={`App.Save(model)`} />

<HeadingLink tag="h6" title={`Collection DB methods`} />

<UpgradeTabs language="go" before={`App.Dao().CollectionQuery()`} after={`App.CollectionQuery()`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().FindCollectionsByType(collectionType)`}
    after={`App.FindAllCollections(collectionTypes...)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindCollectionByNameOrId(nameOrId)`}
    after={`App.FindCollectionByNameOrId(nameOrId)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().IsCollectionNameUnique(name, excludeIds...)`}
    after={`App.IsCollectionNameUnique(name, excludeIds...)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().FindCollectionReferences(collection, excludeIds...)`}
    after={`App.FindCollectionReferences(collection, excludeIds...)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().DeleteCollection(collection)`}
    after={`App.Delete(collection)`}
/>

<UpgradeTabs language="go" before={`App.Dao().SaveCollection(collection)`} after={`App.Save(collection)`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().ImportCollections(importedCollections, deleteMissing, afterSync)`}
    after={`App.ImportCollections(importSliceOfMap, deleteMissing)`}
/>

<UpgradeTabs
    language="go"
    before={`N/A`}
    after={`App.ImportCollectionsByMarshaledJSON(sliceOfMapsBytes, deleteMissing)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().SyncRecordTableSchema(newCollection, oldCollection)`}
    after={`App.SyncRecordTableSchema(newCollection, oldCollection)`}
/>

<HeadingLink tag="h6" title={`Log DB methods`} />

<UpgradeTabs language="go" before={`App.Dao().LogQuery()`} after={`App.LogQuery()`} />

<UpgradeTabs language="go" before={`App.Dao().FindLogById(id)`} after={`App.FindLogById(id)`} />

<UpgradeTabs language="go" before={`App.Dao().LogsStats(expr)`} after={`App.LogsStats(expr)`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().DeleteOldLogs(createdBefore)`}
    after={`App.DeleteOldLogs(createdBefore)`}
/>

<UpgradeTabs language="go" before={`App.Dao().SaveLog(log)`} after={`App.AuxSave(log)`} />

<HeadingLink tag="h6" title={`Other DB methods`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().SaveSettings(newSettings, [optEncryptionKey])`}
    after={`App.Save(newSettings)`}
/>

<UpgradeTabs
    language="go"
    before={`
        titles := []string{"title1", "title2", "title3"}

        collection, err := App.Dao().FindCollectionByNameOrId("articles")
        if err != nil {
            return err
        }

        err = App.Dao().RunInTransaction((txDao) => {
            // create new record for each title
            for _, title := range titles {
                record := models.NewRecord(collection)

                record.Set("title", title)

                err := txDao.SaveRecord(record)
                if err != nil {
                    return err
                }
            }

            return nil
        })
        if err != nil {
            return err
        }
    `}
    after={`
        titles := []string{"title1", "title2", "title3"}

        collection, err := App.FindCollectionByNameOrId("articles")
        if err != nil {
            return err
        }

        err = App.RunInTransaction((txApp) => {
            // create new record for each title
            for _, title := range titles {
                record := core.NewRecord(collection)

                record.Set("title", title)

                err := txApp.Save(record)
                if err != nil {
                    return err
                }
            }

            return nil
        })
        if err != nil {
            return err
        }
    `}
/>

<UpgradeTabs language="go" before={`App.Dao().Vacuum()`} after={`App.Vacuum() / App.AuxVacuum()`} />

<UpgradeTabs language="go" before={`App.Dao().HasTable(tableName)`} after={`App.HasTable(tableName)`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().TableColumns(tableName)`}
    after={`App.TableColumns(tableName)`}
/>

<UpgradeTabs language="go" before={`App.Dao().TableInfo(tableName)`} after={`App.TableInfo(tableName)`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().TableIndexes(tableName)`}
    after={`App.TableIndexes(tableName)`}
/>

<UpgradeTabs language="go" before={`App.Dao().DeleteTable(tableName)`} after={`App.DeleteTable(tableName)`} />

<UpgradeTabs language="go" before={`App.Dao().DeleteView(name)`} after={`App.DeleteView(name)`} />

<UpgradeTabs
    language="go"
    before={`App.Dao().SaveView(name, selectQuery)`}
    after={`App.SaveView(name, selectQuery)`}
/>

<UpgradeTabs
    language="go"
    before={`App.Dao().CreateViewSchema(selectQuery)`}
    after={`App.CreateViewFields(selectQuery)`}
/>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="Record model changes" />

<div class="alert">
    <div class="content">
        <p>
            For all changes please refer to the
            <a
                href="https://github.com/pocketbase/pocketbase/blob/master/core/record_model.go"
                target="_blank"
                rel="noopener noreferrer"
            >
                Record Go struct
            </a>
        </p>
    </div>
</div>

<p>
    The <code>models</code> and its subpackages are merged in <code>core</code>.
</p>

<p>
    The Record create/update operations are simplified and the <code>Dao</code> and
    <code>forms.RecordUpsert</code> abstractions have been removed.
</p>

<p>
    <code>App.Save(record)</code> both validate and persist the record. Use
    <code>App.SaveNoValidate(record)</code> if you want to skip the validations.
</p>

<p>
    Files are treated as regular field value, so for uploading a new record file is enough to call
    <code>record.Set("yourFileField", *filesystem.File)</code>.
</p>

<p>
    Additionally, the <code>record.Set()</code> method now supports all field modifiers that are available
    with the Web APIs. For example:
    <code>record.Set("total+", 10)</code> adds <code>10</code> to the existing <code>total</code> record field
    value. More information about the available modifiers you can find in the main documentation.
</p>

<HeadingLink tag="h6" title="forms.RecordUpsert migration" />
<UpgradeTabs
    language="go"
    before={`
        record, err := app.Dao().FindRecordById("articles", "RECORD_ID")
        if err != nil {
            return err
        }

        form := forms.NewRecordUpsert(app, record)

        form.LoadData(map[string]any{
            "title":  "Lorem ipsum",
            "active": true,
        })

        // upload file(s)
        f1, _ := filesystem.NewFileFromPath("/path/to/file1")
        f2, _ := filesystem.NewFileFromPath("/path/to/file2")
        form.AddFiles("documents", f1, f2)

        // mark file(s) for deletion
        form.RemoveFiles("featuredImages", "demo_xzihx0w.png")

        err = form.Submit();
        if err != nil {
            return err
        }
    `}
    after={`
        record, err := app.FindRecordById("articles", "RECORD_ID")
        if err != nil {
            return err
        }

        // there is also record.Load(map[string]any{ ... })
        record.Set("title", "Lorem ipsum")
        record.Set("active", true)

        // upload file(s)
        f1, _ := filesystem.NewFileFromPath("/path/to/file1")
        f2, _ := filesystem.NewFileFromPath("/path/to/file2")
        record.Set("documents", []any{f1, f2})

        // mark file(s) for deletion
        record.Set("featuredImages-", "demo_xzihx0w.png")

        err = App.Save(record)
        if err != nil {
            return err
        }
    `}
/>

<HeadingLink tag="h6" title="Model changes" />
<UpgradeTabs language="go" before={`record.SchemaData()`} after={`record.FieldsData()`} />
<UpgradeTabs language="go" before={`record.UnknownData()`} after={`record.CustomData()`} />
<UpgradeTabs language="go" before={`record.WithUnknownData(state)`} after={`record.WithCustomData(state)`} />
<UpgradeTabs language="go" before={`record.OriginalCopy()`} after={`record.Original()`} />
<UpgradeTabs language="go" before={`record.CleanCopy()`} after={`record.Fresh()`} />
<UpgradeTabs
    language="go"
    before={`record.GetTime(fieldName)`}
    after={`record.GetDateTime(fieldName).Time()`}
/>

<HeadingLink tag="h6" title="tokens.* package merge" />
<UpgradeTabs
    language="go"
    before={`tokens.NewRecordAuthToken(app, record)`}
    after={`record.NewAuthToken()`}
/>
<UpgradeTabs
    language="go"
    before={`tokens.NewRecordVerifyToken(app, record)`}
    after={`record.NewVerificationToken()`}
/>
<UpgradeTabs
    language="go"
    before={`tokens.NewRecordResetPasswordToken(app, record)`}
    after={`record.NewPasswordResetToken()`}
/>
<UpgradeTabs
    language="go"
    before={`tokens.NewRecordChangeEmailToken(app, record, newEmail)`}
    after={`record.NewEmailChangeToken()`}
/>
<UpgradeTabs
    language="go"
    before={`tokens.NewRecordFileToken(app, record)`}
    after={`record.NewFileToken()`}
/>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="Collection model changes" />

<div class="alert">
    <div class="content">
        <p>
            For all changes please refer to the
            <a
                href="https://github.com/pocketbase/pocketbase/blob/master/core/collection_model.go#L308"
                target="_blank"
                rel="noopener noreferrer"
            >
                Collection Go struct
            </a>
        </p>
    </div>
</div>

<p>
    The<code>models</code> and its subpackages are merged in <code>core</code>.
</p>

<p>
    There are now new dedicated collection type factories:
    <code>{`core.NewBaseCollection(name)`}</code>
    <code>{`core.NewAuthCollection(name)`}</code>
    <code>{`core.NewViewCollection(name)`}</code>
</p>

<p>
    <code>Collection.Schema</code> is renamed to <code>Collection.Fields</code> and now has a type of
    <code>core.FieldsList</code>
    (which is just a convenient alias for regular slice).
    <br />
    There are now also dedicated typed fields in the <code>core</code> package:
</p>
<ul>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#NumberField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.NumberField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#BoolField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.BoolField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#TextField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.TextField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#URLField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.URLField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#EmailField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.EmailField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#EditorField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.EditorField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#DateField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.DateField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#AutodateField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.AutodateField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#JSONField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.JSONField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#RelationField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.RelationField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#SelectField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.SelectField</code>
        </a>
    </li>
    <li>
        <a
            href="{import.meta.env.PB_GODOC_URL}@master/core#FileField"
            target="_blank"
            rel="noopener noreferrer"
        >
            <code>core.FileField</code>
        </a>
    </li>
</ul>

<p>
    All previous dynamic <code>Collection.Options.*</code> fields are flattened for consistency with the JSON Web
    APIs:
</p>
<UpgradeTabs
    language="go"
    before={`Collection.Options.Query = "..."`}
    after={`Collection.ViewQuery = "..."`}
/>
<UpgradeTabs
    language="go"
    before={`Collection.Options.ManageRule = "..."`}
    after={`Collection.ManageRule = "..."`}
/>
<UpgradeTabs
    language="go"
    before={`Collection.Options.OnlyVerified = true`}
    after={`Collection.AuthRule = "verified = true"`}
/>
<UpgradeTabs
    language="go"
    before={`Collection.Options.OnlyVerified = true`}
    after={`Collection.AuthRule = "verified = true"`}
/>
<UpgradeTabs
    language="go"
    before={`Collection.Options.AllowOAuth2Auth = true`}
    after={`
        // note: providers can be set via Collection.OAuth2.Providers
        Collection.OAuth2.Enabled = true
    `}
/>
<UpgradeTabs
    language="go"
    before={`Collection.Options.AllowUsernameAuth = true`}
    after={`
        Collection.PasswordAuth.Enabled = true
        Collection.PasswordAuth.IdentityFields = []string{"username"}
    `}
/>
<UpgradeTabs
    language="go"
    before={`Collection.Options.AllowEmailAuth = true`}
    after={`
        Collection.PasswordAuth.Enabled = true
        Collection.PasswordAuth.IdentityFields = []string{"email"}
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        Collection.Options.RequireEmail = true
        Collection.Options.ExceptEmailDomains = []string{"example.com"}
        Collection.Options.OnlyEmailDomains = []string{"example.com"}
    `}
    after={`
        // you can adjust the system "email" field options in the same way as the regular Collection.Fields, e.g.:
        Collection.Fields.GetByName("email").Require = true
        Collection.Fields.GetByName("email").ExceptDomains = []string{"example.com"}
        Collection.Fields.GetByName("email").OnlyDomains = []string{"example.com"}
    `}
/>
<UpgradeTabs
    language="go"
    before={`Collection.Options.MinPasswordLength = 10`}
    after={`
        // you can adjust the system "password" field options in the same way as the regular Collection.Fields. e.g.:
        Collection.Fields.GetByName("password").Min = 10
    `}
/>

<p>
    The Collection create/update operations are also simplified and the <code>Dao</code> and
    <code>forms.CollectionUpsert</code> abstractions have been removed.
</p>
<p>
    <code>App.Save(collection)</code> both validate and persist the collection. Use
    <code>App.SaveNoValidate(collection)</code> if you want to skip the validations.
</p>
<p>Below is an example <code>forms.CollectionUpsert</code> migration:</p>
<UpgradeTabs
    language="go"
    before={`
        collection := &models.Collection{}

        form := forms.NewCollectionUpsert(app, collection)
        form.Name = "example"
        form.Type = models.CollectionTypeBase
        form.ViewRule = types.Pointer("@request.auth.id != ''")
        form.CreateRule = types.Pointer("")
        form.UpdateRule = types.Pointer("@request.auth.id != ''")
        form.Schema.AddField(&schema.SchemaField{
            Name:     "title",
            Type:     schema.FieldTypeText,
            Required: true,
            Options: &schema.TextOptions{
                Max: types.Pointer(10),
            },
        })
        form.Schema.AddField(&schema.SchemaField{
            Name:     "users",
            Type:     schema.FieldTypeRelation,
            Required: true,
            Options: &schema.RelationOptions{
                MaxSelect:     types.Pointer(5),
                CollectionId:  "ae40239d2bc4477",
                CascadeDelete: true,
            },
        })

        err := form.Submit()
        if err != nil {
            return err
        }
    `}
    after={`
        collection := core.NewBaseCollection("example")

        collection.ViewRule = types.Pointer("@request.auth.id != ''")
        collection.CreateRule = types.Pointer("")
        collection.UpdateRule = types.Pointer("@request.auth.id != ''")
        collection.Fields.Add(&core.TextField{
            Name:     "title",
            Required: true,
            Max:      10,
        })
        collection.Fields.Add(&core.RelationField{
            Name:          "users",
            Required:      true,
            MaxSelect:     5,
            CollectionId:  "ae40239d2bc4477",
            CascadeDelete: true,
        })

        err := app.Save(collection);
        if err != nil {
            return err
        }
    `}
/>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="Migration changes" />
<div class="alert">
    <div class="content">
        <p>
            If your existing migrations are all autogenerated, you may find it easier to upgrade by deleting
            all of them and run with your PocketBase v0.23.0 app
            <code>go run main.go migrate collections</code>
            which will create a full snapshot of your latest collections configuration.
        </p>
        <p>
            Optionally, after that you can also run <code>go run main.go migrate history-sync</code> to remove
            the deleted migrations from the applied migrations history.
        </p>
    </div>
</div>
<p>
    The <code>migrations.Register</code> method accepts the transactional app instance as argument instead of
    <code>dbx.Builder</code>. This allow access not only to the database but also to the app settings,
    filesystem, mailer, etc.
</p>
<UpgradeTabs
    language="go"
    before={`
        m.Register(func(db dbx.Builder) error {
            dao := daos.New(db)

            settings, _ := dao.FindSettings()
            settings.Meta.AppName = "test"
            settings.Logs.MaxDays = 2

            return dao.SaveSettings(settings)
        }, nil)
    `}
    after={`
        m.Register(func(app core.App) error {
            settings := app.Settings()
            settings.Meta.AppName = "test"
            settings.Logs.MaxDays = 2

            return app.Save(settings)
        }, nil)
    `}
/>

<HeadingLink title="Cron changes" />
<p>
    PocketBase v0.23.0 comes with app level cron scheduler - <code>app.Cron()</code> (<em
        >this will allow us in the future to show the registered jobs in the UI</em
    >).
</p>
<p>
    You can still initialize a cron scheduler manually if you want to (especially if you use a custom cron
    package), but <code>app.Cron()</code> will be the recommended way shown in the documentation:
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnBeforeServe().Add(func(e *core.ServeEvent) error {
            scheduler := cron.New()

            // prints "Hello!" every 2 minutes
            scheduler.MustAdd("hello", "*/2 * * * *", func() {
                println("Hello!")
            })

            scheduler.Start()

            return nil
        })
    `}
    after={`
        // prints "Hello!" every 2 minutes
        app.Cron().MustAdd("hello", "*/2 * * * *", func() {
            println("Hello!")
        })
    `}
/>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="Routing changes" />

<p>
    PocketBase v0.23.0 ships with a new router built on top of the standarad
    <a href="https://go.dev/blog/routing-enhancements" target="_blank" rel="noopener noreferrer">
        Go 1.22 mux enhancements
    </a>.
    <br />
    Some of the more notable differences are:
</p>
<ul>
    <li>
        Route path parameters must comply with the
        <a href="https://go.dev/blog/routing-enhancements" target="_blank" rel="noopener noreferrer">
            Go 1.22 mux syntax
        </a>.
        <br />
        Or in other words <code>:param</code> must be replaced with <code>{`{param}`}</code>. For static path
        parameter instead of <code>*</code> you have to use special
        <code>{`{path...}`}</code> param.
    </li>
    <li>
        Similar to the new hook handlers, middlewares must call <code>e.Next()</code> in order to proceed with
        the execution chain.
    </li>
    <li>
        To access the auth state in a route you can call <code>e.Auth</code>. Similarly, to set a new logged
        auth state you can simply assign a new auth record to the <code>e.Auth</code> field.
    </li>
    <li>
        Because admins are now <code>_superusers</code> auth collection records, <code>e.Auth</code> will be
        set to the authenticated superuser.
        <br />
        To check whether <code>e.Auth</code> is a superuser you can use the <code>e.HasSuperuserAuth()</code>
        helper (or alternatively check the record method <code>e.Auth.IsSuperuser()</code> or
        <code>e.Auth.Collection().Name == "_superusers"</code>).
    </li>
    <li>
        <code>apis.RequestInfo(c)</code> has been replaced with <code>e.RequestInfo()</code>.
        <br />
        Note also that the <code>requestInfo.Data</code> field was renamed to <code>requestInfo.Body</code>
        for consistency with the <code>@request.body.*</code> API rules change.
    </li>
</ul>

<p class="txt-bold">Below you can find a short comparision table with the new routing interface:</p>

<HeadingLink tag="h6" title="Route registration" />
<UpgradeTabs
    language="go"
    before={`
        app.OnBeforeServe().Add(func(e *core.ServeEvent) error {
            e.Router.GET("/hello/:name", func(c echo.Context) error {
                name := c.PathParam("name")

                return c.JSON(http.StatusOK, map[string]string{
                    "message": "Hello " + name,
                })
            }, apis.RequireRecordAuth())

            return nil
        })
    `}
    after={`
        app.OnServe().BindFunc(func(se *core.ServeEvent) error {
            se.Router.GET("/hello/{name}", func(e *core.RequestEvent) error {
                name := e.Request.PathValue("name")

                return e.JSON(http.StatusOK, map[string]string{
                    "message": "Hello " + name,
                })
            }).Bind(apis.RequireAuth())

            return se.Next()
        })
    `}
/>

<HeadingLink tag="h6" title="Static files serving" />
<UpgradeTabs
    language="go"
    before={`
        app.OnBeforeServe().Add(func(e *core.ServeEvent) error {
            e.Router.GET(
                "/*",
                apis.StaticDirectoryHandler(os.DirFS("/path/to/public"), false),
            )

            return nil
        })
    `}
    after={`
        app.OnServe().BindFunc(func(se *core.ServeEvent) error {
            se.Router.GET(
                "/{path...}",
                apis.Static(os.DirFS("/path/to/public"), false),
            )

            return se.Next()
        })
    `}
/>

<HeadingLink tag="h6" title="Middleware registration" />
<UpgradeTabs
    language="go"
    before={`
        app.OnBeforeServe().Add(func(e *core.ServeEvent) error {
            e.Router.Use((next echo.HandlerFunc) echo.HandlerFunc {
                return func(c echo.Context) error {
                    // e.g. inspect some header value before processing the request
                    header := c.Request().Header.Get("Some-Header")
                    if header == "" {
                        return apis.NewBadRequestError("Invalid request", nil)
                    }

                    return next(c) // proceed with the request chain
                }
            })

            return nil
        })
    `}
    after={`
        app.OnServe().BindFunc(func(se *core.ServeEvent) error {
            se.Router.BindFunc(func(e *core.RequestEvent) error {
                // e.g. inspect some header value before processing the request
                header := e.Request.Header.Get("Some-Header")
                if header == "" {
                    return e.BadRequestError("Invalid request", nil)
                }

                return e.Next() // proceed with the request chain
            })

            return se.Next()
        })
    `}
/>

<HeadingLink tag="h6" title="Retrieving the current auth state" />
<UpgradeTabs
    language="go"
    before={`
        // "c" is the echo.Context

        admin  := c.Get("admin")      // admin model
        record := c.Get("authRecord") // auth record model

        // you can also read the auth state from the cached request info
        info   := apis.RequestInfo(c)
        admin  := info.Admin
        record := info.AuthRecord

        isAdminAuth := admin != null
    `}
    after={`
        // "e" is core.RequestEvent

        auth := e.Auth // auth record model

        // you can also read the auth state from the cached request info
        info, _ := e.RequestInfo()
        auth := info.Auth

        // or e.Auth != nil && e.Auth.IsSuperuser()
        isSuperuserAuth := e.HasSuperuserAuth()
    `}
/>

<HeadingLink tag="h6" title="Reading path parameters" />
<UpgradeTabs
    language="go"
    before={`
        id := c.PathParam("id")
    `}
    after={`
        id := e.Request.PathValue("id")
    `}
/>

<HeadingLink tag="h6" title="Reading query parameters" />
<UpgradeTabs
    language="go"
    before={`
        search := c.QueryParam("search")

        // or via the cached request object
        info := apis.RequestInfo(c)
        search := info.Query["search"]
    `}
    after={`
        search := e.Request.URL.Query().Get("test")

        // or via the cached request object
        info, _ := e.RequestInfo()
        search := info.Query["search"]
    `}
/>

<HeadingLink tag="h6" title="Reading request headers" />
<UpgradeTabs
    language="go"
    before={`
        token := c.Request().Header.Get("Some-Header")

        // or via the cached request object (the header value is always normalized)
        info := apis.RequestInfo(c)
        token := info.Headers["some_header"]
    `}
    after={`
        token := e.Request.Header.Get("Some-Header")

        // or via the cached request object (the header value is always normalized)
        info, _ := e.RequestInfo()
        token := info.Headers["some_header"]
    `}
/>

<HeadingLink tag="h6" title="Writing response headers" />
<UpgradeTabs
    language="go"
    before={`
        c.Response().Header().Set("Some-Header", "123")
    `}
    after={`
        e.Response.Header().Set("Some-Header", "123")
    `}
/>

<HeadingLink tag="h6" title="Reading request body" />
<UpgradeTabs
    language="go"
    before={`
        // read/scan the request body fields into a typed object
        // (note that the echo request body cannot be read twice with "bind")
        body := struct {
            Title string ` +
        "`" +
        `json:"title" form:"title"` +
        "`" +
        `
        }{}
        if err := c.Bind(&body); err != nil {
            return apis.NewBadRequestError("Failed to read request body", err)
        }

        // read single multipart/form-data field
        title := c.FormValue("title")

        // read single multipart/form-data file
        doc := c.FormFile("document")

        // convert the multipart/form-data file into *filesystem.File
        f, err := filesystem.NewFileFromMultipart(doc)
    `}
    after={`
        // read/scan the request body fields into a typed object
        // (it safe to be read multiple times)
        body := struct {
            Title string ` +
        "`" +
        `json:"title" form:"title"` +
        "`" +
        `
        }{}
        if err := e.BindBody(&body); err != nil {
            return e.BadRequestError("Failed to read request body", err)
        }

        // read single multipart/form-data field
        title := e.Request.FormValue("title")

        // read single multipart/form-data file
        doc := e.Request.FormFile("document")

        // return the uploaded files as []*filesystem.File
        files, err := e.FindUploadedFiles("document")
    `}
/>

<HeadingLink tag="h6" title="Writing response body" />
<UpgradeTabs
    language="go"
    before={`
        // send response with json body
        c.JSON(200, {"name": "John"})

        // send response with string body
        c.String(200, "Lorem ipsum...")

        // send response with html body
        // (check also the "Rendering templates" section)
        c.HTML(200, "<h1>Hello!</h1>")

        // redirect
        c.Redirect(307, "https://example.com")

        // send response with no body
        c.NoContent(204)
    `}
    after={`
        // send response with json body
        e.JSON(200, {"name": "John"})

        // send response with string body
        e.String(200, "Lorem ipsum...")

        // send response with html body
        // (check also the "Rendering templates" section)
        e.HTML(200, "<h1>Hello!</h1>")

        // redirect
        e.Redirect(307, "https://example.com")

        // send response with no body
        e.NoContent(204)
    `}
/>

<HeadingLink tag="h6" title="Builtin middlewares" />
<UpgradeTabs
    language="go"
    before={`
        apis.RequireRecordAuth([optCollectionNames...])
    `}
    after={`
        apis.RequireAuth([optCollectionNames...])
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        apis.RequireSameContextRecordAuth()
    `}
    after={`
        apis.RequireSameCollectionContextAuth("")
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        apis.RequireAdminAuth()
    `}
    after={`
        // the same as apis.RequireAuth("_superusers")
        apis.RequireSuperuserAuth()
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        apis.RequireAdminAuthOnlyIfAny(app)
    `}
    after={`
        N/A
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        apis.RequireAdminOrRecordAuth("users")
    `}
    after={`
        apis.RequireAuth("_superusers", "users")
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        apis.RequireAdminOrOwnerAuth(ownerIdParam)
    `}
    after={`
        apis.RequireSuperuserOrOwnerAuth(ownerIdParam)
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        apis.ActivityLogger(app)
    `}
    after={`
        // No longer needed because it is registered by default for all routes.
        // If you want to disable the log of successful route execution you can attach the apis.SkipSuccessActivityLog() middleware.
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        middleware.Gzip()
    `}
    after={`
        apis.Gzip()
    `}
/>

<HeadingLink tag="h6" title="API helpers" />
<UpgradeTabs
    language="go"
    before={`
        apis.RecordAuthResponse(app, c, record, meta)
    `}
    after={`
        apis.RecordAuthResponse(e, record, authMethod, meta)
    `}
/>
<UpgradeTabs
    language="go"
    before={`
        apis.EnrichRecord(c, app.Dao(), record, "categories")
        apis.EnrichRecords(c, app.Dao(), records, "categories")
    `}
    after={`
        apis.EnrichRecord(e, record, "categories")
        apis.EnrichRecords(e, records, "categories")
    `}
/>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="Test helpers changes" />

<HeadingLink tag="h6" title="tests.ApiScenario" class="txt-mono" />
<ul>
    <li>
        Renamed <code class="txt-danger">ApiScenario.<strong>Url</strong></code> to
        <code class="txt-success">ApiScenario.<strong>URL</strong></code>.
    </li>
    <li>
        Renamed <code class="txt-danger">ApiScenario.<strong>RequestHeaders</strong></code> to
        <code class="txt-success">ApiScenario.<strong>Headers</strong></code>.
    </li>
    <li>
        <p>Changed the <code>ApiScenario.TestAppFactory</code> field function signature:</p>
        <UpgradeTabs
            language="go"
            before={`
                TestAppFactory: func(t *testing.T) *TestApp {
                    ...
                }
            `}
            after={`
                TestAppFactory: func(t testing.TB) *TestApp {
                    ...
                }
            `}
        />
    </li>
    <li>
        <p>Changed the <code>ApiScenario.BeforeTestFunc</code> field function signature:</p>
        <UpgradeTabs
            language="go"
            before={`
                BeforeTestFunc: func(t *testing.T, app *TestApp, e *echo.Echo) {
                    ...
                }
            `}
            after={`
                BeforeTestFunc: func(t testing.TB, app *TestApp, e *core.ServeEvent) {
                    ...
                }
            `}
        />
    </li>
    <li>
        <p>Changed the <code>ApiScenario.AfterTestFunc</code> field function signature:</p>
        <UpgradeTabs
            language="go"
            before={`
                AfterTestFunc: func(t *testing.T, app *TestApp, res *http.Response) {
                    ...
                }
            `}
            after={`
                AfterTestFunc: func(t testing.TB, app *TestApp, res *http.Response) {
                    ...
                }
            `}
        />
    </li>
    <li>
        <p>
            <code>ApiScenario.ExpectedEvents</code> is now optional and performs partial match (see
            <a
                href="https://github.com/pocketbase/pocketbase/issues/5333#issuecomment-2335099405"
                target="_blank"
                rel="noopener noreferrer"
            >
                issue#5333
            </a>):
        </p>
        <p>
            In the rare cases where you want to ensure that no other events except those listed have fired,
            you can use the wildcard <code>"*": 0</code> entry:
        </p>
        <CodeBlock
            language="go"
            content={`
                ExpectedEvents: map[string]int{
                  "*":      0,
                  "EventA": 1,
                  "EventB": 2,
                }
            `}
        />
    </li>
</ul>

<HeadingLink tag="h6" title="tests.TestMailer" class="txt-mono" />
<ul>
    <li>
        Converted <code class="txt-danger">TestMailer.<strong>SentMessages</strong></code> field to
        <code class="txt-success">TestMailer.<strong>Messages()</strong></code> method.
    </li>
    <li>
        Converted <code class="txt-danger">TestMailer.<strong>TotalSend</strong></code> field to
        <code class="txt-success">TestMailer.<strong>TotalSend()</strong></code> method.
    </li>
    <li>
        Converted <code class="txt-danger">TestMailer.<strong>LastMessage</strong></code> field to
        <code class="txt-success">TestMailer.<strong>LastMessage()</strong></code> method.
    </li>
    <li>
        Added <code>TestMailer.<strong>FirstMessage()</strong></code> method.
    </li>
</ul>

<!-- ------------------------------------------------------------- -->

<HeadingLink title="Event hooks changes" />

<div class="alert">
    <div class="content">
        <p>
            For more details about all new hooks and their event properties, please refer to the
            <code>On*</code> method docs in the
            <a
                href="{import.meta.env.PB_GODOC_URL}@master/core#App"
                target="_blank"
                rel="noopener noreferrer"
            >
                <code>core.App</code> interface docs.
            </a>
        </p>
    </div>
</div>

<HeadingLink tag="h6" class="txt-mono" title="OnBeforeBootstrap -> OnBootstrap" />
<UpgradeTabs
    language="go"
    before={`
        app.OnBeforeBootstrap().Add(func(e *core.BootstrapEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnBootstrap().BindFunc(func(e *core.BootstrapEvent) error {
            // ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAfterBootstrap -> OnBootstrap" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAfterBootstrap().Add(func(e *core.BootstrapEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnBootstrap().BindFunc(func(e *core.BootstrapEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnBeforeServe -> OnServe" />
<UpgradeTabs
    language="go"
    before={`
        app.OnBeforeServe().Add(func(e *core.ServeEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnServe().BindFunc(func(e *core.ServeEvent) error {
            // ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnBeforeApiError/OnAfterApiError -> any middleware" />
<UpgradeTabs
    language="go"
    before={`
        app.OnBeforeApiError().Add(func(e *core.ApiErrorEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnServe().BindFunc(func(se *core.ServeEvent) error {
            se.Router.BindFunc((e *core.RequestEvent) error {
                err := e.Next()

                // ...

                return err
            })

            return se.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnTerminate" />
<UpgradeTabs
    language="go"
    before={`
        app.OnTerminate().Add(func(e *core.TerminateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnTerminate().BindFunc(func(e *core.TerminateEvent) error {
            // ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnModelBeforeCreate -> OnRecordCreate" />
<UpgradeTabs
    language="go"
    before={`
        app.OnModelBeforeCreate().Add(func(e *core.ModelEvent) error {
            // e.Model ...

            return nil
        })
    `}
    after={`
        // note: OnModelCreate is available if you are targetting non-Record/Collection models
        app.OnRecordCreate().BindFunc(func(e *core.RecordEvent) error {
            // e.Record ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnModelAfterCreate -> OnRecordAfterCreateSuccess" />
<UpgradeTabs
    language="go"
    before={`
        app.OnModelAfterCreate().Add(func(e *core.ModelEvent) error {
            // e.Model ...

            return nil
        })
    `}
    after={`
        // note: OnModelAfterCreateSuccess is available if you are targetting non-Record/Collection models
        app.OnRecordAfterCreateSuccess().BindFunc(func(e *core.RecordEvent) error {
            // e.Record ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnModelBeforeUpdate -> OnRecordUpdate" />
<UpgradeTabs
    language="go"
    before={`
        app.OnModelBeforeUpdate().Add(func(e *core.ModelEvent) error {
            // e.Model ...

            return nil
        })
    `}
    after={`
        // note: OnModelUpdate is available if you are targetting non-Record/Collection models
        app.OnRecordUpdate().BindFunc(func(e *core.RecordEvent) error {
            // e.Record ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnModelAfterUpdate -> OnRecordAfterUpdateSuccess" />
<UpgradeTabs
    language="go"
    before={`
        app.OnModelAfterUpdate().Add(func(e *core.ModelEvent) error {
            // e.Model ...

            return nil
        })
    `}
    after={`
        // note: OnModelAfterUpdateSuccess is available if you are targetting non-Record/Collection models
        app.OnRecordAfterUpdateSuccess().BindFunc(func(e *core.RecordEvent) error {
            // e.Record ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnModelBeforeDelete -> OnRecordDelete" />
<UpgradeTabs
    language="go"
    before={`
        app.OnModelBeforeDelete().Add(func(e *core.ModelEvent) error {
            // e.Model ...

            return nil
        })
    `}
    after={`
        // note: OnModelDelete is available if you are targetting non-Record/Collection models
        app.OnRecordBeforeDelete().BindFunc(func(e *core.RecordEvent) error {
            // e.Record ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnModelAfterDelete -> OnRecordAfterDeleteSuccess" />
<UpgradeTabs
    language="go"
    before={`
        app.OnModelAfterDelete().Add(func(e *core.ModelEvent) error {
            // e.Model ...

            return nil
        })
    `}
    after={`
        // note: OnModelAfterDeleteSuccess is available if you are targetting non-Record/Collection models
        app.OnRecordAfterDeleteSuccess().BindFunc(func(e *core.RecordEvent) error {
            // e.Record ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerBeforeAdminResetPasswordSend -> OnMailerRecordPasswordResetSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerBeforeAdminResetPasswordSend().Add(func(e *core.MailerAdminEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordPasswordResetSend().BindFunc(func(e *core.MailerRecordEvent) error {
            // e.Admin -> e.Record ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerAfterAdminResetPasswordSend -> OnMailerRecordPasswordResetSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerAfterAdminResetPasswordSend().Add(func(e *core.MailerAdminEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordPasswordResetSend().BindFunc(func(e *core.MailerRecordEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // e.Admin -> e.Record ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerBeforeRecordResetPasswordSend -> OnMailerRecordPasswordResetSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerBeforeRecordResetPasswordSend().Add(func(e *core.MailerRecordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordPasswordResetSend().BindFunc(func(e *core.MailerRecordEvent) error {
            // ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerAfterRecordResetPasswordSend -> OnMailerRecordPasswordResetSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerAfterRecordResetPasswordSend().Add(func(e *core.MailerRecordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordPasswordResetSend().BindFunc(func(e *core.MailerRecordEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerBeforeRecordVerificationSend -> OnMailerRecordVerificationSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerBeforeRecordVerificationSend().Add(func(e *core.MailerRecordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordVerificationSend().BindFunc(func(e *core.MailerRecordEvent) error {
            // ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerAfterRecordVerificationSend -> OnMailerRecordVerificationSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerAfterRecordVerificationSend().Add(func(e *core.MailerRecordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordVerificationSend().BindFunc(func(e *core.MailerRecordEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerBeforeRecordChangeEmailSend -> OnMailerRecordEmailChangeSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerBeforeRecordChangeEmailSend().Add(func(e *core.MailerRecordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordEmailChangeSend().BindFunc(func(e *core.MailerRecordEvent) error {
            // ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnMailerAfterRecordChangeEmailSend -> OnMailerRecordEmailChangeSend"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnMailerAfterRecordChangeEmailSend().Add(func(e *core.MailerRecordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnMailerRecordEmailChangeSend().BindFunc(func(e *core.MailerRecordEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordsListRequest" />
<p>
    <em>
        Side-note: if you are using this hook simply for adding/removing record fields you may want to check
        <code>onRecordEnrich</code> instead
    </em>
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordsListRequest().Add(func(e *core.RecordsListEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordsListRequest().BindFunc(func(e *core.RecordsListRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordViewRequest" />
<p>
    <em>
        Side-note: if you are using this hook simply for adding/removing record fields you may want to check
        <code>onRecordEnrich</code> instead
    </em>
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordViewRequest().Add(func(e *core.RecordViewEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordViewRequest().BindFunc(func(e *core.RecordRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordBeforeCreateRequest -> OnRecordCreateRequest" />
<p>
    <em>
        With v0.23+ the hook fires <strong>before</strong> the record validations allowing you to adjust "Nonempty"
        fields before checking the constraint.
    </em>
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeCreateRequest().Add(func(e *core.RecordCreateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordCreateRequest().BindFunc(func(e *core.RecordRequestEvent) error {
            // uploaded files are simple values as part of the e.Record;
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordAfterCreateRequest -> OnRecordCreateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterCreateRequest().Add(func(e *core.RecordCreateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordCreateRequest().BindFunc(func(e *core.RecordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordBeforeUpdateRequest -> OnRecordUpdateRequest" />
<p>
    <em>
        With v0.23+ the hook fires <strong>before</strong> the record validations allowing you to adjust "Nonempty"
        fields before checking the constraint.
    </em>
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeUpdateRequest().Add(func(e *core.RecordUpdateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordUpdateRequest().BindFunc(func(e *core.RecordRequestEvent) error {
            // uploaded files are simple values as part of the e.Record;
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordAfterUpdateRequest -> OnRecordUpdateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterUpdateRequest().Add(func(e *core.RecordUpdateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordUpdateRequest().BindFunc(func(e *core.RecordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordBeforeDeleteRequest -> OnRecordDeleteRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeDeleteRequest().Add(func(e *core.RecordDeleteEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordDeleteRequest().BindFunc(func(e *core.RecordRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordAfterDeleteRequest -> OnRecordDeleteRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterDeleteRequest().Add(func(e *core.RecordDeleteEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordDeleteRequest().BindFunc(func(e *core.RecordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordAuthRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAuthRequest().Add(func(e *core.RecordAuthEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthRequest().BindFunc(func(e *core.RecordAuthRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeAuthWithPasswordRequest -> OnRecordAuthWithPasswordRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeAuthWithPasswordRequest().Add(func(e *core.RecordAuthWithPasswordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthWithPasswordRequest().BindFunc(func(e *core.RecordAuthWithPasswordRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterAuthWithPasswordRequest -> OnRecordAuthWithPasswordRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterAuthWithPasswordRequest().Add(func(e *core.RecordAuthWithPasswordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthWithPasswordRequest().BindFunc(func(e *core.RecordAuthWithPasswordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeAuthWithOAuth2Request -> OnRecordAuthWithOAuth2Request"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeAuthWithOAuth2Request().Add(func(e *core.RecordAuthWithOAuth2Event) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthWithOAuth2Request().BindFunc(func(e *core.RecordAuthWithOAuth2RequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterAuthWithOAuth2Request -> OnRecordAuthWithOAuth2Request"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterAuthWithOAuth2Request().Add(func(e *core.RecordAuthWithOAuth2Event) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthWithOAuth2Request().BindFunc(func(e *core.RecordAuthWithOAuth2RequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeAuthRefreshRequest -> OnRecordAuthRefreshRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeAuthRefreshRequest().Add(func(e *core.RecordAuthRefreshEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthRefreshRequest().BindFunc(func(e *core.RecordAuthRefreshRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterAuthRefreshRequest -> OnRecordAuthRefreshRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterAuthRefreshRequest().Add(func(e *core.RecordAuthRefreshEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthRefreshRequest().BindFunc(func(e *core.RecordAuthRefreshRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordListExternalAuthsRequest -> OnRecordsListRequest" />
<em>External auths are converted to system <code>_externalAuths</code> collection records.</em>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordListExternalAuthsRequest().Add(func(e *core.RecordListExternalAuthsEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordsListRequest(core.CollectionNameExternalAuths).BindFunc(func(e *core.RecordsListRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeUnlinkExternalAuthRequest -> OnRecordDeleteRequest"
/>
<em>External auths are converted to system <code>_externalAuths</code> collection records.</em>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeUnlinkExternalAuthRequest().Add(func(e *core.RecordUnlinkExternalAuthEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordDeleteRequest(core.CollectionNameExternalAuths).BindFunc(func(e *core.RecordRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterUnlinkExternalAuthRequest -> OnRecordDeleteRequest"
/>
<em>External auths are converted to system <code>_externalAuths</code> collection records.</em>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterUnlinkExternalAuthRequest().Add(func(e *core.RecordUnlinkExternalAuthEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordDeleteRequest(core.CollectionNameExternalAuths).BindFunc(func(e *core.RecordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeRequestPasswordResetRequest -> OnRecordRequestPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeRequestPasswordResetRequest().Add(func(e *core.RecordRequestPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestPasswordResetRequest().BindFunc(func(e *core.RecordRequestPasswordResetRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterRequestPasswordResetRequest -> OnRecordRequestPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterRequestPasswordResetRequest().Add(func(e *core.RecordRequestPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestPasswordResetRequest().BindFunc(func(e *core.RecordRequestPasswordResetRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeConfirmPasswordResetRequest -> OnRecordConfirmPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeConfirmPasswordResetRequest().Add(func(e *core.RecordConfirmPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmPasswordResetRequest().BindFunc(func(e *core.RecordConfirmPasswordResetRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterConfirmPasswordResetRequest -> OnRecordConfirmPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterConfirmPasswordResetRequest().Add(func(e *core.RecordConfirmPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmPasswordResetRequest().BindFunc(func(e *core.RecordConfirmPasswordResetRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeRequestVerificationRequest -> OnRecordRequestVerificationRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeRequestVerificationRequest().Add(func(e *core.RecordRequestVerificationEvent) error
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestVerificationRequest().BindFunc(func(e *core.RecordRequestVerificationRequestEvent) error
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterRequestVerificationRequest -> OnRecordRequestVerificationRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterRequestVerificationRequest().Add(func(e *core.RecordRequestVerificationEvent) error
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestVerificationRequest().BindFunc(func(e *core.RecordRequestVerificationRequestEvent) error
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeConfirmVerificationRequest -> OnRecordConfirmVerificationRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeConfirmVerificationRequest().Add(func(e *core.RecordConfirmVerificationEvent) error
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmVerificationRequest().BindFunc(func(e *core.RecordConfirmVerificationRequestEvent) error
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterConfirmVerificationRequest -> OnRecordConfirmVerificationRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterConfirmVerificationRequest().Add(func(e *core.RecordConfirmVerificationEvent) error
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmVerificationRequest().BindFunc(func(e *core.RecordConfirmVerificationRequestEvent) error
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordBeforeRequestEmailChangeRequest -> OnRecordRequestEmailChangeRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeRequestEmailChangeRequest().Add(func(e *core.RecordRequestEmailChangeEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestEmailChangeRequest().BindFunc(func(e *core.RecordRequestEmailChangeRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterRequestEmailChangeRequest -> OnRecordRequestEmailChangeRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterRequestEmailChangeRequest().Add(func(e *core.RecordRequestEmailChangeEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestEmailChangeRequest().BindFunc(func(e *core.RecordRequestEmailChangeRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRecordBeforeConfirmEmailChangeRequest -> " />
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordBeforeConfirmEmailChangeRequest().Add(func(e *core.RecordConfirmEmailChangeEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmEmailChangeRequest().BindFunc(func(e *core.RecordConfirmEmailChangeRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRecordAfterConfirmEmailChangeRequest -> OnRecordConfirmEmailChangeRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRecordAfterConfirmEmailChangeRequest().Add(func(e *core.RecordConfirmEmailChangeEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmEmailChangeRequest().BindFunc(func(e *core.RecordConfirmEmailChangeRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRealtimeConnectRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRealtimeConnectRequest().Add(func(e *core.RealtimeConnectEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRealtimeConnectRequest().BindFunc(func(e *core.RealtimeConnectRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRealtimeDisconnectRequest -> OnRealtimeConnectRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRealtimeDisconnectRequest().Add(func(e *core.RealtimeDisconnectEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRealtimeConnectRequest().BindFunc(func(e *core.RealtimeConnectRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRealtimeBeforeMessageSend -> OnRealtimeMessageSend" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRealtimeBeforeMessageSend().Add(func(e *core.RealtimeMessageEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRealtimeMessageSend().BindFunc(func(e *core.RealtimeMessageEvent) error {
            // ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnRealtimeAfterMessageSend -> OnRealtimeMessageSend" />
<UpgradeTabs
    language="go"
    before={`
        app.OnRealtimeAfterMessageSend().Add(func(e *core.RealtimeMessageEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRealtimeMessageSend().BindFunc(func(e *core.RealtimeMessageEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRealtimeBeforeSubscribeRequest -> OnRealtimeSubscribeRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRealtimeBeforeSubscribeRequest().Add(func(e *core.RealtimeSubscribeEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRealtimeSubscribeRequest().BindFunc(func(e *core.RealtimeSubscribeRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnRealtimeAfterSubscribeRequest -> OnRealtimeSubscribeRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnRealtimeAfterSubscribeRequest().Add(func(e *core.RealtimeSubscribeEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRealtimeSubscribeRequest().BindFunc(func(e *core.RealtimeSubscribeRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnFileDownloadRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnFileDownloadRequest().Add(func(e *core.FileDownloadEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnFileDownloadRequest().BindFunc(func(e *core.FileDownloadRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnFileBeforeTokenRequest -> OnFileTokenRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnFileBeforeTokenRequest().Add(func(e *core.FileTokenEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnFileTokenRequest().BindFunc(func(e *core.FileTokenRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnFileAfterTokenRequest -> OnFileTokenRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnFileAfterTokenRequest().Add(func(e *core.FileTokenEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnFileTokenRequest().BindFunc(func(e *core.FileTokenRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionsListRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionsListRequest().Add(func(e *core.CollectionsListEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionsListRequest().BindFunc(func(e *core.CollectionsListRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionViewRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionViewRequest().Add(func(e *core.CollectionViewEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionViewRequest().BindFunc(func(e *core.CollectionRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionBeforeCreateRequest -> OnCollectionCreateRequest" />
<p>
    <em>
        With v0.23+ the hook fires <strong>before</strong> the collection validations.
    </em>
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionBeforeCreateRequest().Add(func(e *core.CollectionCreateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionCreateRequest().BindFunc(func(e *core.CollectionRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionAfterCreateRequest -> OnCollectionCreateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionAfterCreateRequest().Add(func(e *core.CollectionCreateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionCreateRequest().BindFunc(func(e *core.CollectionRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionBeforeUpdateRequest -> OnCollectionUpdateRequest" />
<p>
    <em>
        With v0.23+ the hook fires <strong>before</strong> the collection validations allowing you to adjust "Nonempty"
        fields before checking the constraint.
    </em>
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionBeforeUpdateRequest().Add(func(e *core.CollectionUpdateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionUpdateRequest().BindFunc(func(e *core.CollectionRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionAfterUpdateRequest -> OnCollectionUpdateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionAfterUpdateRequest().Add(func(e *core.CollectionUpdateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionUpdateRequest().BindFunc(func(e *core.CollectionRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionBeforeDeleteRequest -> OnCollectionDeleteRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionBeforeDeleteRequest().Add(func(e *core.CollectionDeleteEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionDeleteRequest().BindFunc(func(e *core.CollectionRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionAfterDeleteRequest -> OnCollectionDeleteRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionAfterDeleteRequest().Add(func(e *core.CollectionDeleteEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionDeleteRequest().BindFunc(func(e *core.CollectionRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnCollectionsBeforeImportRequest -> OnCollectionsImportRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionsBeforeImportRequest().Add(func(e *core.CollectionsImportEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnCollectionImportRequest().BindFunc(func(e *core.CollectionsImportRequestEvent) error {
            // "e.Collections"  is replaced with "e.CollectionsData" map...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnCollectionAfterImportRequest -> OnCollectionImportRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnCollectionAfterImportRequest().Add(func(e *core.CollectionsImportEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.onCollectionImportRequest().BindFunc(func(e *core.CollectionsImportRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.Collections"  is replaced with "e.CollectionsData" map...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnSettingsListRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnSettingsListRequest().Add(func(e *core.SettingsListEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnSettingsListRequest().BindFunc(func(e *core.SettingsListRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnSettingsBeforeUpdateRequest -> OnSettingsUpdateRequest" />
<p>
    <em>
        With v0.23+ the hook fires <strong>before</strong> the settings validations.
    </em>
</p>
<UpgradeTabs
    language="go"
    before={`
        app.OnSettingsBeforeUpdateRequest().Add(func(e *core.SettingsUpdateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnSettingsUpdateRequest().BindFunc(func(e *core.SettingsUpdateRequestEvent) error {
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnSettingsAfterUpdateRequest -> OnSettingsUpdateRequest" />
<UpgradeTabs
    language="go"
    before={`
        onSettingsAfterUpdateRequest((e) => {
            // ...

            return nil
        })
    `}
    after={`
        onSettingsUpdateRequest((e) => {
            if err := e.Next(); err != nil {
                return err
            }

            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminsListRequest -> OnRecordsListRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminsListRequest().Add(func(e *core.AdminsListEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordsListRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordsListRequestEvent) error {
            // e.Admins -> e.Records
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        }, )
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminViewRequest -> OnRecordViewRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminViewRequest().Add(func(e *core.AdminViewEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordViewRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordRequestEvent) error {
            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminBeforeCreateRequest -> OnRecordCreateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminBeforeCreateRequest().Add(func(e *core.AdminCreateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordCreateRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordRequestEvent) error {
            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminAfterCreateRequest -> OnRecordCreateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAfterCreateRequest().Add(func(e *core.AdminCreateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordCreateRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminBeforeUpdateRequest -> OnRecordUpdateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminBeforeUpdateRequest().Add(func(e *core.AdminUpdateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordUpdateRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordRequestEvent) error {
            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminAfterUpdateRequest -> OnRecordUpdateRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAfterUpdateRequest().Add(func(e *core.AdminUpdateEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordUpdateRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminBeforeDeleteRequest -> OnRecordDeleteRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminBeforeDeleteRequest().Add(func(e *core.AdminDeleteEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordDeleteRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordRequestEvent) error {
            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminAfterDeleteRequest -> OnRecordDeleteRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAfterDeleteRequest().Add(func(e *core.AdminDeleteEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordDeleteRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminAuthRequest -> OnRecordAuthRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAuthRequest().Add(func(e *core.AdminAuthEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordAuthRequestEvent) error {
            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnAdminBeforeAuthWithPasswordRequest -> OnRecordAuthWithPasswordRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminBeforeAuthWithPasswordRequest().Add(func(e *core.AdminAuthWithPasswordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthWithPasswordRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordAuthWithPasswordRequestEvent) error {
            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnAdminAfterAuthWithPasswordRequest -> OnRecordAuthWithPasswordRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAfterAuthWithPasswordRequest().Add(func(e *core.AdminAuthWithPasswordEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthWithPasswordRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordAuthWithPasswordRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnAdminBeforeAuthRefreshRequest -> OnRecordAuthRefreshRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminBeforeAuthRefreshRequest().Add(func(e *core.AdminAuthRefreshEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthRefreshRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordAuthRefreshRequestEvent) error {
            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return e.Next()
        })
    `}
/>

<HeadingLink tag="h6" class="txt-mono" title="OnAdminAfterAuthRefreshRequest -> OnRecordAuthRefreshRequest" />
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAfterAuthRefreshRequest().Add(func(e *core.AdminAuthRefreshEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordAuthRefreshRequest(core.CollectionNameSuperusers).BindFunc(func(e *core.RecordAuthRefreshRequestEvent) error {
            if err := e.Next(); err != nil {
                return err
            }

            // e.Admin -> e.Record
            // "e.HttpContext" is no longer available because "e" is the request event itself ...

            return nil
        })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnAdminBeforeRequestPasswordResetRequest -> OnRecordRequestPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminBeforeRequestPasswordResetRequest().Add(func(e *core.AdminRequestPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestPasswordResetRequest(core.CollectionNameSuperusers)
            .BindFunc(func(e *core.RecordRequestPasswordResetRequestEvent) error {
                // e.Admin -> e.Record
                // "e.HttpContext" is no longer available because "e" is the request event itself ...

                return e.Next()
            })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnAdminAfterRequestPasswordResetRequest -> OnRecordRequestPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAfterRequestPasswordResetRequest().Add(func(e *core.AdminRequestPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordRequestPasswordResetRequest(core.CollectionNameSuperusers)
            .BindFunc(func(e *core.RecordRequestPasswordResetRequestEvent) error {
                if err := e.Next(); err != nil {
                    return err
                }

                // e.Admin -> e.Record
                // "e.HttpContext" is no longer available because "e" is the request event itself ...

                return nil
            })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnAdminBeforeConfirmPasswordResetRequest -> OnRecordConfirmPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminBeforeConfirmPasswordResetRequest().Add(func(e *core.AdminConfirmPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmPasswordResetRequest(core.CollectionNameSuperusers)
            .BindFunc(func(e *core.RecordConfirmPasswordResetRequestEvent) error {
                // e.Admin -> e.Record
                // "e.HttpContext" is no longer available because "e" is the request event itself ...

                return e.Next()
            })
    `}
/>

<HeadingLink
    tag="h6"
    class="txt-mono"
    title="OnAdminAfterConfirmPasswordResetRequest -> OnRecordConfirmPasswordResetRequest"
/>
<UpgradeTabs
    language="go"
    before={`
        app.OnAdminAfterConfirmPasswordResetRequest().Add(func(e *core.AdminConfirmPasswordResetEvent) error {
            // ...

            return nil
        })
    `}
    after={`
        app.OnRecordConfirmPasswordResetRequest(core.CollectionNameSuperusers)
            .BindFunc(func(e *core.RecordConfirmPasswordResetRequestEvent) error {
                if err := e.Next(); err != nil {
                    return err
                }

                // e.Admin -> e.Record
                // "e.HttpContext" is no longer available because "e" is the request event itself ...

                return nil
            })
    `}
/>
