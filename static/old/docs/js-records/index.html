<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta Tags -->
    <meta name="description" content="Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="PocketBase - Open Source backend in 1 file">
    <meta property="og:description" content="Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard">
    <meta property="og:image" content="/images/og.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="PocketBase - Open Source backend in 1 file">
    <meta property="twitter:description" content="Open Source backend in 1 file with realtime database, authentication, file storage and admin dashboard">
    <meta property="twitter:image" content="/images/og.png">

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/images/favicon/site.webmanifest">
    <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#000000">
    <link rel="shortcut icon" href="/images/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- preload -->
    <link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-v18-latin_cyrillic-regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-v18-latin_cyrillic-600.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-v18-latin_cyrillic-700.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-v18-latin_cyrillic-italic.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/ubuntu-mono/ubuntu-mono-v17-cyrillic_latin-regular.woff2" as="font" type="font/woff2" crossorigin>

    <script>
        // CSS3 animations support check
        (function () {
            if (typeof document === "undefined") {
                return; // serverside rendering
            }

            let elem = document.createElement("div");
            let hasAnimation = elem.style.animationName !== undefined;

            if (!hasAnimation) {
                document.documentElement.classList.add("no-animations");
            }
        })();
    </script>

    <script>
        // silent svelte console errors
        if (typeof window === "undefined") {
            window = {};
        }
        window.Prism = window.Prism || {};
        window.Prism.manual = true;

        if (typeof navigator !== "undefined" && navigator.userAgentData) {
            navigator.userAgentData.getHighEntropyValues([
                "architecture",
            ]).then((ua) => {
                window.UA_ARCHITECTURE = ua.architecture
            });
        }
    </script>

    
		<link href="../../_app/immutable/assets/2.0975cac3.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/main.c922e272.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/3.9c47a874.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/CodeBlock.d22afb3e.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.b8d67116.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.a7566c1a.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons.5311a548.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.f5b995db.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.9b449d5b.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.1674d90f.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/2.7231d4f7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/PageFooter.476871d4.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/tooltip.f1d7ab7e.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/CommonHelper.7329e1a7.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/3.7d3ee590.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/stores.d888f6de.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preferences.0fc33f39.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/43.6ad50ad8.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/HeadingLink.20322812.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/CodeBlock.a090ee9b.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Toc.c31a36b6.js"><title>Extend with JavaScript - Record operations - Docs - PocketBase</title><!-- HEAD_svelte-q27gla_START --><!-- HEAD_svelte-q27gla_END -->
</head>
<body>
    <div class="page-body">



<header class="page-header"><div class="wrapper wrapper-lg"><a href="/" class="logo logo-sm"><img src="/images/logo.svg" alt="PocketBase logo" width="40" height="40">
            <span class="txt">Pocket<strong>Base</strong></span>
            <span class="version">v0.22.27</span></a>

        <div class="flex-fill"></div>

        
        

        

        <button type="button" class="btn btn-circle btn-secondary responsive-menu-btn" title="Menu"><span></span>
            <i class="ri-menu-3-fill"></i>
            

<div class="toggler-container"></div></button>

        <nav class="main-menu"><a href="/faq" class="btn btn-secondary">FAQ</a>
            <a href="https://github.com/pocketbase/pocketbase/discussions" class="btn btn-secondary" target="_blank" rel="noreferrer noopener">Discussions
            </a>
            <a href="https://github.com/pocketbase/pocketbase" class="btn btn-circle btn-secondary" target="_blank" rel="noreferrer noopener" title="GitHub Repo"><i class="ri-github-line"></i></a>
            <a href="/docs" class="btn btn-outline btn-expanded"><span class="txt">Documentation</span></a></nav></div></header>

<main class="wrapper wrapper-lg page-content-wrapper">

<aside class="page-sidebar highlight docs-sidebar"><div class="sticky-wrapper svelte-1izh69t"><div class="absolute-wrapper svelte-1izh69t"><div class="sidebar-content svelte-1izh69t"><nav class="sidebar-list">
        
        <a href="/docs" class="list-item">
            <span class="icon"><i class="ri-home-2-line"></i></span>
            <span class="txt">Introduction</span>
            </a>
        
        
        <a href="/docs/collections" class="list-item">
            <span class="icon"><i class="ri-database-2-line"></i></span>
            <span class="txt">Collections</span>
            </a>
        
        
        <a href="/docs/api-rules-and-filters" class="list-item">
            <span class="icon"><i class="ri-shield-check-line"></i></span>
            <span class="txt">API rules and filters</span>
            </a>
        
        
        <a href="/docs/client-side-sdks" class="list-item">
            <span class="icon"><i class="ri-tools-line"></i></span>
            <span class="txt">Client-side SDKs</span>
            </a>
        
        
        <a href="/docs/authentication" class="list-item">
            <span class="icon"><i class="ri-group-line"></i></span>
            <span class="txt">Authentication</span>
            </a>
        
        
        <a href="/docs/files-handling" class="list-item">
            <span class="icon"><i class="ri-upload-cloud-line"></i></span>
            <span class="txt">Files upload and handling</span>
            </a>
        
        
        <a href="/docs/working-with-relations" class="list-item">
            <span class="icon"><i class="ri-mind-map"></i></span>
            <span class="txt">Working with relations</span>
            </a>
        
        
        <a href="/docs/use-as-framework" class="list-item">
            <span class="icon"><i class="ri-code-s-slash-line"></i></span>
            <span class="txt">Use as framework</span>
            </a>
        
        
        <a href="/docs/api-records" class="list-item">
            <span class="icon"><i class="ri-file-list-2-line"></i></span>
            <span class="txt">Web APIs reference</span>
            </a>
        
        
        <a href="/docs/going-to-production" class="list-item">
            <span class="icon"><i class="ri-check-double-line"></i></span>
            <span class="txt">Going to production</span>
            </a>
        </nav>

                <div class="clearfix m-t-base"></div>

                <div class="sidebar-bg-section"><div class="tabs-header stretched compact"><a class="tab-item" href="/docs/go-overview"><div class="block">Extend with
                                <br>
                                <strong>Go</strong></div></a>
                        <a class="tab-item active" href="/docs/js-overview"><div class="block">Extend with
                                <br>
                                <strong>JavaScript</strong></div></a></div>
                    <div class="tabs-content"><div class="tab-item"><nav class="sidebar-list">
        
        <a href="/docs/go-overview" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Overview</span>
            </a>
        
        
        <a href="/docs/go-event-hooks" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Event hooks</span>
            </a>
        
        
        <a href="/docs/go-routing" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Routing</span>
            </a>
        
        
        <a href="/docs/go-database" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Database</span>
            </a>
        
        
        <a href="/docs/go-records" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Record operations</span>
            </a>
        
        
        <a href="/docs/go-collections" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Collection operations</span>
            </a>
        
        
        <a href="/docs/go-migrations" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Migrations</span>
            </a>
        
        
        <a href="/docs/go-jobs-scheduling" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Jobs scheduling</span>
            </a>
        
        
        <a href="/docs/go-console-commands" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Console commands</span>
            </a>
        
        
        <a href="/docs/go-sending-emails" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Sending emails</span>
            </a>
        
        
        <a href="/docs/go-rendering-templates" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Rendering templates</span>
            </a>
        
        
        <a href="/docs/go-logging" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Logging</span>
            </a>
        
        
        <a href="/docs/go-testing" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Testing</span>
            </a>
        
        
        <a href="/docs/go-custom-models" class="list-item"><span class="label label-sm label-info svelte-1izh69t">Go</span>
            
            <span class="txt">Custom models</span>
            </a>
        </nav></div>
                        <div class="tab-item active"><nav class="sidebar-list">
        
        <a href="/docs/js-overview" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Overview</span>
            </a>
        
        
        <a href="/docs/js-event-hooks" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Event hooks</span>
            </a>
        
        
        <a href="/docs/js-routing" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Routing</span>
            </a>
        
        
        <a href="/docs/js-database" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Database</span>
            </a>
        
        
        <a href="/docs/js-records" class="list-item active"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Record operations</span>
            </a>
        
        
        <a href="/docs/js-collections" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Collection operations</span>
            </a>
        
        
        <a href="/docs/js-migrations" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Migrations</span>
            </a>
        
        
        <a href="/docs/js-jobs-scheduling" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Jobs scheduling</span>
            </a>
        
        
        <a href="/docs/js-console-commands" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Console commands</span>
            </a>
        
        
        <a href="/docs/js-sending-emails" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Sending emails</span>
            </a>
        
        
        <a href="/docs/js-sending-http-requests" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Sending HTTP requests</span>
            </a>
        
        
        <a href="/docs/js-rendering-templates" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Rendering templates</span>
            </a>
        
        
        <a href="/docs/js-logging" class="list-item"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Logging</span>
            </a>
        
        
        <a href="/jsvm/index.html" class="list-item" target="_blank" rel="noopener noreferrer"><span class="label label-sm label-warning svelte-1izh69t">JS</span>
            
            <span class="txt">Types reference</span>
            </a>
        </nav></div></div></div></div></div></div>
</aside>

<div class="page-content"><nav class="breadcrumbs"><div class="breadcrumb-item">Extend with JavaScript - Record operations</div></nav>

    <div class="content"><p>The most common task when extending PocketBase probably would be querying and operating with your
    collection records.
</p>

<div class="toc"><ul class="toc-list-1"></ul></div>

<h3 id="getset-record-fields" class="heading-link "><a href="#getset-record-fields" class="link-primary">
        Get/Set record fields
        </a></h3>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// export the public safe record fields as map[string]any</span>
record<span class="token punctuation">.</span><span class="token function">publicExport</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// returns a new model copy populated with the original/intial record data</span>
<span class="token comment">// (could be useful if you want to compare old and new field values)</span>
record<span class="token punctuation">.</span><span class="token function">originalCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// returns a copy of the current record model populated only</span>
<span class="token comment">// with its latest data state and everything else reset to the defaults</span>
record<span class="token punctuation">.</span><span class="token function">cleanCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// set the value of a single record field</span>
record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>

<span class="token comment">// bulk set fields from a map</span>
record<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment">// retrieve a single record field value</span>
record<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span>            <span class="token comment">// -> as any</span>
record<span class="token punctuation">.</span><span class="token function">getBool</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span>        <span class="token comment">// -> as bool</span>
record<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span>      <span class="token comment">// -> as string</span>
record<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span>         <span class="token comment">// -> as int</span>
record<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span>       <span class="token comment">// -> as float64</span>
record<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span>        <span class="token comment">// -> as time.Time</span>
record<span class="token punctuation">.</span><span class="token function">getDateTime</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span>    <span class="token comment">// -> as types.DateTime</span>
record<span class="token punctuation">.</span><span class="token function">getStringSlice</span><span class="token punctuation">(</span><span class="token string">"someField"</span><span class="token punctuation">)</span> <span class="token comment">// -> as []string</span>

<span class="token comment">// unmarshal a single json field value into the provided result</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DynamicModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">unmarshalJSONField</span><span class="token punctuation">(</span><span class="token string">"someJsonField"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>

<span class="token comment">// retrieve a single or multiple expanded data</span>
record<span class="token punctuation">.</span><span class="token function">expandedOne</span><span class="token punctuation">(</span><span class="token string">"author"</span><span class="token punctuation">)</span>     <span class="token comment">// -> as null|Record</span>
record<span class="token punctuation">.</span><span class="token function">expandedAll</span><span class="token punctuation">(</span><span class="token string">"categories"</span><span class="token punctuation">)</span> <span class="token comment">// -> as []Record</span>

<span class="token comment">// auth records only</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">validatePassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">passwordHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"john.doe"</span><span class="token punctuation">)</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">"test@example.com"</span><span class="token punctuation">)</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">emailVisibility</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">setEmailVisibility</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">verified</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">setVerified</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">tokenKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">setTokenKey</span><span class="token punctuation">(</span><span class="token string">"ABCD123"</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">refreshTokenKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// sets autogenerated TokenKey</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">lastResetSentAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">setLastResetSentAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// ---</span>
record<span class="token punctuation">.</span><span class="token function">lastVerificationSentAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">setLastVerificationSentAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h3 id="fetch-records" class="heading-link "><a href="#fetch-records" class="link-primary">
        Fetch records
        </a></h3>

<h5 id="fetch-single-record" class="heading-link "><a href="#fetch-single-record" class="link-primary">
        Fetch single record
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// retrieve a single "articles" collection record by its id</span>
<span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findRecordById</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"RECORD_ID"</span><span class="token punctuation">)</span>

<span class="token comment">// retrieve a single "articles" collection record by a single key-value pair</span>
<span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirstRecordByData</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"slug"</span><span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">)</span>

<span class="token comment">// retrieve a single "articles" collection record by a string filter expression</span>
<span class="token comment">// (use "{:placeholder}" to safely bind untrusted user input parameters)</span>
<span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirstRecordByFilter</span><span class="token punctuation">(</span>
    <span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"status = 'public' &amp;&amp; category = {:category}"</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">category</span><span class="token operator">:</span> <span class="token string">"news"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h5 id="fetch-multiple-records" class="heading-link "><a href="#fetch-multiple-records" class="link-primary">
        Fetch multiple records
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// retrieve multiple "articles" collection records by their ids</span>
<span class="token keyword">const</span> records <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findRecordsByIds</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"RECORD_ID1"</span><span class="token punctuation">,</span> <span class="token string">"RECORD_ID2"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// retrieve multiple "articles" collection records by a custom dbx expression(s)</span>
<span class="token comment">// (for all avalaible expressions, please check the Database guide)</span>
<span class="token keyword">const</span> records <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findRecordsByExpr</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span>
    $dbx<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token string">"LOWER(username) = {:username}"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">"username"</span><span class="token operator">:</span> <span class="token string">"John.Doe"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    $dbx<span class="token punctuation">.</span><span class="token function">hashExp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">"pending"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// retrieve multiple "articles" collection records by a string filter expression</span>
<span class="token comment">// (use "{:placeholder}" to safely bind untrusted user input parameters)</span>
<span class="token keyword">const</span> records <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findRecordsByFilter</span><span class="token punctuation">(</span>
    <span class="token string">"articles"</span><span class="token punctuation">,</span>                                    <span class="token comment">// collection</span>
    <span class="token string">"status = 'public' &amp;&amp; category = {:category}"</span><span class="token punctuation">,</span> <span class="token comment">// filter</span>
    <span class="token string">"-publised"</span><span class="token punctuation">,</span>                                   <span class="token comment">// sort</span>
    <span class="token number">10</span><span class="token punctuation">,</span>                                            <span class="token comment">// limit</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                                             <span class="token comment">// offset</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">category</span><span class="token operator">:</span> <span class="token string">"news"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                          <span class="token comment">// optional filter params</span>
<span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h5 id="fetch-auth-records" class="heading-link "><a href="#fetch-auth-records" class="link-primary">
        Fetch auth records
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// retrieve a single auth collection record by its email</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAuthRecordByEmail</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">,</span> <span class="token string">"test@example.com"</span><span class="token punctuation">)</span>

<span class="token comment">// retrieve a single auth collection record by its username (case insensitive)</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAuthRecordByUsername</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">,</span> <span class="token string">"John.Doe"</span><span class="token punctuation">)</span>

<span class="token comment">// retrieve a single auth collection record by its JWT (auth, password reset, etc.)</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAuthRecordByToken</span><span class="token punctuation">(</span><span class="token string">"YOUR_TOKEN"</span><span class="token punctuation">,</span> $app<span class="token punctuation">.</span><span class="token function">settings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>recordAuthToken<span class="token punctuation">.</span>secret<span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h5 id="custom-record-query" class="heading-link "><a href="#custom-record-query" class="link-primary">
        Custom record query
        </a></h5>
<p>In addition to the above read and write helpers, you can also create custom Record model queries using
    <code>Dao.recordQuery(collection)</code>
    method. It returns a DB builder that can be used with the same methods described in the
    <a href="/docs/js-database">Database guide</a>.
</p>
<p>For retrieving a <strong>single</strong> Record model with the <code>one()</code> executor, you can use a
    blank <code>new Record()</code> model to populate the result in.
</p>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">function</span> <span class="token function">findTopArticle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> record <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Record</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">recordQuery</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">andWhere</span><span class="token punctuation">(</span>$dbx<span class="token punctuation">.</span><span class="token function">hashExp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token string">"active"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">"rank ASC"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span>

    <span class="token keyword">return</span> record
<span class="token punctuation">}</span>

<span class="token keyword">const</span> article <span class="token operator">=</span> <span class="token function">findTopArticle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>
<p>For retrieving <strong>multiple</strong> Record models with the <code>all()</code> executor, you can use
    <code>arrayOf(new Record)</code>
    to create an array placeholder in which to populate the resolved DB result.
</p>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// the below is identical to</span>
<span class="token comment">// dao.findRecordsByFilter("articles", "status = 'active'", '-published', 10)</span>
<span class="token comment">// but allows more advanced use cases and filtering (aggregations, subqueries, etc.)</span>
<span class="token keyword">function</span> <span class="token function">findLatestArticles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> records <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Record</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">recordQuery</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">andWhere</span><span class="token punctuation">(</span>$dbx<span class="token punctuation">.</span><span class="token function">hashExp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token string">"active"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">"published DESC"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span>

    <span class="token keyword">return</span> records
<span class="token punctuation">}</span>

<span class="token keyword">const</span> articles <span class="token operator">=</span> <span class="token function">findLatestArticles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h3 id="create-new-record" class="heading-link "><a href="#create-new-record" class="link-primary">
        Create new record
        </a></h3>

<h5 id="create-new-record-without-data-validations" class="heading-link "><a href="#create-new-record-without-data-validations" class="link-primary">
        Create new record WITHOUT data validations
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> collection <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findCollectionByNameOrId</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> record <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Record</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// bulk load the record data during initialization</span>
    <span class="token string-property property">"title"</span><span class="token operator">:</span> <span class="token string">"Lorem ipsum"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"active"</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// or load individual fields separately</span>
record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"someOtherField"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>

$app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">saveRecord</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h5 id="create-new-record-with-data-validations" class="heading-link "><a href="#create-new-record-with-data-validations" class="link-primary">
        Create new record WITH data validations
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> collection <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findCollectionByNameOrId</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> record <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Record</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span>

<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RecordUpsertForm</span><span class="token punctuation">(</span>$app<span class="token punctuation">,</span> record<span class="token punctuation">)</span>

<span class="token comment">// or form.loadRequest(request, "")</span>
form<span class="token punctuation">.</span><span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">"title"</span><span class="token operator">:</span>          <span class="token string">"Lorem ipsum"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"active"</span><span class="token operator">:</span>         <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">"someOtherField"</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// manually upload file(s)</span>
<span class="token keyword">const</span> f1 <span class="token operator">=</span> $filesystem<span class="token punctuation">.</span><span class="token function">fileFromPath</span><span class="token punctuation">(</span><span class="token string">"/path/to/file1"</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> f2 <span class="token operator">=</span> $filesystem<span class="token punctuation">.</span><span class="token function">fileFromPath</span><span class="token punctuation">(</span><span class="token string">"/path/to/file2"</span><span class="token punctuation">)</span>
form<span class="token punctuation">.</span><span class="token function">addFiles</span><span class="token punctuation">(</span><span class="token string">"yourFileField1"</span><span class="token punctuation">,</span> f1<span class="token punctuation">,</span> f2<span class="token punctuation">)</span>

<span class="token comment">// or mark file(s) for deletion</span>
form<span class="token punctuation">.</span><span class="token function">removeFiles</span><span class="token punctuation">(</span><span class="token string">"yourFileField2"</span><span class="token punctuation">,</span> <span class="token string">"demo_xzihx0w.png"</span><span class="token punctuation">)</span>

<span class="token comment">// validate and submit (internally it calls $app.dao().saveRecord(record) in a transaction)</span>
form<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h5 id="intercept-record-before-create-api-hook" class="heading-link "><a href="#intercept-record-before-create-api-hook" class="link-primary">
        Intercept record before create API hook
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token function">onRecordBeforeCreateRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>httpContext<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// ignore for admins</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// overwrite the submitted "active" field value to false</span>
    e<span class="token punctuation">.</span>record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

    <span class="token comment">// or you can also prevent the create event by returning an error, eg.:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>record<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"pending"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadRequestError</span><span class="token punctuation">(</span><span class="token string">"status must be pending"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"articles"</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h3 id="update-existing-record" class="heading-link "><a href="#update-existing-record" class="link-primary">
        Update existing record
        </a></h3>

<h5 id="update-record-without-data-validations" class="heading-link "><a href="#update-record-without-data-validations" class="link-primary">
        Update record WITHOUT data validations
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findRecordById</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"RECORD_ID"</span><span class="token punctuation">)</span>

<span class="token comment">// set individual fields</span>
<span class="token comment">// or bulk load with record.load({...})</span>
record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token string">"Lorem ipsum"</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"someOtherField"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>

$app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">saveRecord</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h5 id="update-record-with-data-validations" class="heading-link "><a href="#update-record-with-data-validations" class="link-primary">
        Update record WITH data validations
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findRecordById</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"RECORD_ID"</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RecordUpsertForm</span><span class="token punctuation">(</span>$app<span class="token punctuation">,</span> record<span class="token punctuation">)</span>

<span class="token comment">// or form.loadRequest(request, "")</span>
form<span class="token punctuation">.</span><span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">"title"</span><span class="token operator">:</span>          <span class="token string">"Lorem ipsum"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"active"</span><span class="token operator">:</span>         <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">"someOtherField"</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// validate and submit (internally it calls $app.dao().saveRecord(record) in a transaction)</span>
form<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><!-- HTML_TAG_END --></code>
</div>

<h5 id="intercept-record-before-update-api-hook" class="heading-link "><a href="#intercept-record-before-update-api-hook" class="link-primary">
        Intercept record before update API hook
        </a></h5>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token function">onRecordBeforeUpdateRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>httpContext<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// ignore for admins</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// overwrite the submitted "active" field value to false</span>
    e<span class="token punctuation">.</span>record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

    <span class="token comment">// or you can also prevent the create event by returning an error, eg.:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>record<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"pending"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadRequestError</span><span class="token punctuation">(</span><span class="token string">"status must be pending"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"articles"</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h3 id="delete-record" class="heading-link "><a href="#delete-record" class="link-primary">
        Delete record
        </a></h3>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findRecordById</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"RECORD_ID"</span><span class="token punctuation">)</span>

$app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deleteRecord</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h3 id="transaction" class="heading-link "><a href="#transaction" class="link-primary">
        Transaction
        </a></h3>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> titles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"title1"</span><span class="token punctuation">,</span> <span class="token string">"title2"</span><span class="token punctuation">,</span> <span class="token string">"title3"</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> collection <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findCollectionByNameOrId</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">)</span>

$app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">runInTransaction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">txDao</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// create new record for each title</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> title <span class="token keyword">of</span> titles<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> record <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Record</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span>

        record<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span>

        txDao<span class="token punctuation">.</span><span class="token function">saveRecord</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h3 id="programmatically-expanding-relations" class="heading-link "><a href="#programmatically-expanding-relations" class="link-primary">
        Programmatically expanding relations
        </a></h3>
<p>To expand record relations programmatically you can use the
    <code>$app.dao().expandRecord(record, expands, customFetchFunc)</code> or
    <code>$app.dao().expandRecords(records, expands, customFetchFunc)</code>
    methods.
</p>
<p>Once loaded, you can access the expanded relations via
    <code>record.expandedOne(relName)</code> or
    <code>record.expandedAll(relName)</code> methods.
</p>
<p>For example:</p>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirstRecordByData</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"slug"</span><span class="token punctuation">,</span> <span class="token string">"lorem-ipsum"</span><span class="token punctuation">)</span>

<span class="token comment">// expand the "author" and "categories" relations</span>
$app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">expandRecord</span><span class="token punctuation">(</span>record<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"author"</span><span class="token punctuation">,</span> <span class="token string">"categories"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token comment">// print the expanded records</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>record<span class="token punctuation">.</span><span class="token function">expandedOne</span><span class="token punctuation">(</span><span class="token string">"author"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>record<span class="token punctuation">.</span><span class="token function">expandedAll</span><span class="token punctuation">(</span><span class="token string">"categories"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div>

<h3 id="check-if-record-can-be-accessed" class="heading-link "><a href="#check-if-record-can-be-accessed" class="link-primary">
        Check if record can be accessed
        </a></h3>
<p>To check whether a custom client request or user can access a single record, you can use the
    <code>$app.dao().canAccessRecord(record, requestInfo, rule)</code> method.
</p>
<p>For example:</p>
<div class="code-wrapper prism-light svelte-1qrji6i"><code class="svelte-1qrji6i"><!-- HTML_TAG_START --><span class="token comment">// allow access to the article with the specified slug</span>
<span class="token comment">// only if the current client request satisfy the articles view rule</span>
<span class="token function">routerAdd</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token string">"/articles/:slug"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> info <span class="token operator">=</span> $apis<span class="token punctuation">.</span><span class="token function">requestInfo</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>

    <span class="token keyword">const</span> slug <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token string">"slug"</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> record <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirstRecordByData</span><span class="token punctuation">(</span><span class="token string">"articles"</span><span class="token punctuation">,</span> <span class="token string">"slug"</span><span class="token punctuation">,</span> slug<span class="token punctuation">)</span>

    <span class="token keyword">const</span> canAccess <span class="token operator">=</span> $app<span class="token punctuation">.</span><span class="token function">dao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">canAccessRecord</span><span class="token punctuation">(</span>record<span class="token punctuation">,</span> info<span class="token punctuation">,</span> record<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>viewRule<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canAccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ForbiddenError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><!-- HTML_TAG_END --></code>
</div></div>

    <hr>

<div class="docs-footer svelte-1dbn67j"><a href="/docs/js-database" class="btn btn-secondary btn-prev svelte-1dbn67j"><i class="ri-arrow-left-line"></i>
            <span class="txt">Prev: Database</span></a>

    <a href="/docs/js-collections" class="btn btn-outline btn-expanded btn-next svelte-1dbn67j"><span class="txt">Next: Collection operations</span>
            <i class="ri-arrow-right-line"></i></a>
</div></div></main>

<footer class="page-footer"><div class="wrapper wrapper-lg"><div class="primary-bar"><nav class="footer-col links"><a href="/faq" class="link-item">FAQ</a>
                <a href="https://github.com/pocketbase/pocketbase/discussions" class="link-item" target="_blank" rel="noopener noreferrer">Discussions
                </a>
                <a href="/docs" class="link-item">Documentation</a></nav>

            <nav class="footer-col links"><a href="https://github.com/pocketbase/js-sdk" class="link-item" target="_blank" rel="noopener noreferrer">JavaScript SDK
                </a>
                <a href="https://github.com/pocketbase/dart-sdk" class="link-item" target="_blank" rel="noopener noreferrer">Dart SDK
                </a></nav>

            <div class="footer-col socials"><div class="watermark-logo">Pocket<strong>Base</strong></div>
                <a href="mailto:support" class="btn btn-secondary btn-circle btn-hint social-item" aria-label="Contact support"><i class="ri-mail-line"></i></a>
                <a href="https://twitter.com/pocketbase" rel="noopener noreferrer" target="_blank" class="btn btn-secondary btn-circle btn-hint social-item" aria-label="Go to Twitter"><i class="ri-twitter-line"></i></a>
                <a href="https://github.com/pocketbase/pocketbase" rel="noopener noreferrer" target="_blank" class="btn btn-secondary btn-circle btn-hint social-item" aria-label="Go to GitHub"><i class="ri-github-line"></i></a></div></div>
        <div class="secondary-bar"><div class="terms"><span class="txt"> 2023-2024 Pocket<strong>Base</strong></span>
                <span class="gopher-credit">The Gopher artwork is from
                    <a href="https://github.com/marcusolsson/gophers" target="_blank" rel="noreferrer noopener">marcusolsson/gophers
                    </a></span></div>
            <div class="flex-fill"></div>
            <div class="credit">Crafted by <a href="https://gani.bg" target="_blank" rel="noopener noreferrer" class="link-hint"><strong>Gani</strong></a></div></div></div></footer>



<button type="button" class="btn btn-circle btn-secondary scroll-to-top svelte-h1x6u4" arial-label="Go to top"><i class="ri-arrow-up-line"></i>
</button>


			
			<script>
				{
					__sveltekit_v27nvd = {
						base: new URL("../..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null,null,null];

					Promise.all([
						import("../../_app/immutable/entry/start.b8d67116.js"),
						import("../../_app/immutable/entry/app.9b449d5b.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 3, 43],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
</body>
</html>
